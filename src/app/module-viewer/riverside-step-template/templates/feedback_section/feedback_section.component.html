<h2
  class="template-title"
  [innerHtml]="contentData.title | safehtml"
></h2>

<div
  class="template-description"
  [innerHtml]="contentData.description | safehtml"
></div>

<div class="page-wrapper">
    <div class="tabsbar">

        <div
          class="tabitem"
          [ngClass]="{'active': currentSection == persona.name + '_wrapper'}"
          (click)="scrollTo(persona.name + '_wrapper')"
          *ngFor="let persona of inputIds.fromPreviousSteps"
          [hidden]="!(notEmpty(inputs[persona.name].content) && notEmpty(inputs[persona.title].content))"
        >
            <riverside-persona
              *ngIf="notEmpty(inputs[persona.name].content) && notEmpty(inputs[persona.title].content)"
              [title]="textContent(inputs[persona.title].content)"
              [name]="textContent(inputs[persona.name].content)"
              [picture]="inputs[persona.picture].content"
              [size]="50"
            ></riverside-persona>
        </div>
    </div>
    <div
        e3-scroll-spy
        [spiedClassNames]="['persona-wrapper']"
        (sectionChange)="onSectionChange($event)"
      >
        <div class="persona-wrapper" id="{{persona.name+'_wrapper'}}" *ngFor="let persona of inputIds.fromPreviousSteps; let i=index">
          <div class="persona-content" *ngIf="notEmpty(inputs[persona.name].content) && notEmpty(inputs[persona.title].content)">
            <div class="column">
                <riverside-persona
                [title]="textContent(inputs[persona.title].content)"
                [name]="textContent(inputs[persona.name].content)"
                [picture]="inputs[persona.picture].content"
                [size]="130"
              ></riverside-persona>
              <div style="min-height: 300px;margin-top: 10px" >
                <div class="behavior-title" style="padding-left: 0px;" >Demographics</div>
                <div class="previous-behavior ">
                  <div class="behavior-subtitle">Gender</div>
                  <div class="behavior-content no-color inline">Male (<ice

                    id="{{'persona_perc_male_' + (i+1) }}"
                    [hideChanges]="hideChanges"
                    [user]="me"
                    [disabled]="disabled"
                    (changed)="contentChanged()"
                    [(data)]="inputs[persona.perc_male]"
                  ></ice>%) / Female (<ice

                  id="{{'persona_perc_female_' + (i+1) }}"
                  [hideChanges]="hideChanges"
                  [user]="me"
                  [disabled]="disabled"
                  (changed)="contentChanged()"
                  [(data)]="inputs[persona.perc_female]"
                ></ice>%)</div>
                </div>
                <div class="previous-behavior">
                  <div class="behavior-subtitle">Average Age</div>
                  <ice
                    id="{{'persona_age_' + (i+1) }}"
                    [hideChanges]="hideChanges"
                    [user]="me"
                    [disabled]="disabled"
                    (changed)="contentChanged()"
                    [(data)]="inputs[persona.age]"
                  ></ice>
                </div>
                <div class="previous-behavior">
                  <div class="behavior-subtitle">How They Buy</div>
                  <ice
                    id="{{'persona_behavior_' + (i+1) + '_how_they_buy'}}"
                    [hideChanges]="hideChanges"
                    [user]="me"
                    [disabled]="disabled"
                    (changed)="contentChanged()"
                    [(data)]="inputs[persona.how_they_buy]"
                  ></ice>
                </div>
                <div class="previous-behavior">
                  <div class="behavior-subtitle">How They Pay</div>
                  <ice
                    id="{{'persona_behavior_' + (i+1) + '_how_they_pay'}}"
                    [hideChanges]="hideChanges"
                    [user]="me"
                    [disabled]="disabled"
                    (changed)="contentChanged()"
                    [(data)]="inputs[persona.how_they_pay]"
                  ></ice>
                </div>
                <div class="previous-behavior">
                  <div class="behavior-subtitle">Typical Titles</div>
                  <ice
                    id="{{'persona_behavior_' + (i+1) + '_titles'}}"
                    [hideChanges]="hideChanges"
                    [user]="me"
                    [disabled]="disabled"
                    (changed)="contentChanged()"
                    [(data)]="inputs[persona.titles]"
                  ></ice>
                </div>
                <div class="behavior-title" style="padding-left: 0px;margin-top: 15px" >Watering Holes</div>
                <div class="previous-behavior">
                    <ice
                    id="{{'persona_behavior_' + (i+1) + '_watering_holes'}}"
                    [hideChanges]="hideChanges"
                    [user]="me"
                    [disabled]="disabled"
                    (changed)="contentChanged()"
                    [(data)]="inputs[persona.watering_holes]"
                  ></ice>
                </div>

              </div>
          </div>
        </div>
    </div>
  </div>
</div>

<div
  class="template-footer"
  *ngIf="contentData.instructions"
  [innerHtml]="contentData.instructions | safehtml"
></div>

<feedback-source
    (submit)="feedbackClicked($event)"
    (messageChanged)="message=$event"
    (currentTabChanged)="currentTab=$event"
    >
</feedback-source>

<module-nav
  [action]="action"
  (feedback)="feedbackClicked(message)"
  [submitting]="submitting"
  [subaction]="subaction"
  [hideActionButton]="currentTab != 'text'"
  >
</module-nav>
